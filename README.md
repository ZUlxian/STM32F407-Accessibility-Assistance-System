# ğŸ¦¯ STM32F407ç›²äººè¾…åŠ©ç³»ç»Ÿ <sub>åŸºäºåµŒå…¥å¼æŠ€æœ¯çš„æ— éšœç¢è§£å†³æ–¹æ¡ˆ</sub>

<div align="center">

![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)
![Platform](https://img.shields.io/badge/Platform-STM32F407-green.svg)
![Status](https://img.shields.io/badge/Status-Archived-red.svg)
![Language](https://img.shields.io/badge/Language-C-blue.svg)

</div>

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®ä¸ºæœ¬äººåˆ¶ä½œäº†ä¸¤ä¸ªå¤šæœˆçš„æ¯•ä¸šè®¾è®¡ï¼Œç›®çš„æ˜¯ä¸ºäº†æ¢ç©¶ç‰¹æ®Šç¾¤ä½“çš„æ— éšœç¢éœ€æ±‚ï¼Œå› æ­¤è¯¥é¡¹ç›®æ˜¯ä»¥ç§‘å­¦æ¢ç©¶ä¸ºä¸»ï¼Œè€Œä¸æ˜¯ä¸ºäº†åšæ¶ˆè´¹çº§äº§å“ï¼Œä¹Ÿå°±æ˜¯è¯´æˆå“æ•ˆæœåªèƒ½è¯´æ˜¯èƒ½ç”¨ä½†ä¸å¥½ç”¨ï¼Œæˆ–è€…æ¢å¥è¯è¯´è¯¥é¡¹ç›®æ›´å¤šåƒæ˜¯æ¦‚å¿µå‹äº§å“ï¼Œæ—¨åœ¨ä¸ºä¹‹åçš„ç›²äººæ— éšœç¢è¾…åŠ©ç³»ç»Ÿç ”ç©¶æä¾›ä¸€ä¸ªæ–¹å‘ã€‚

---

## ğŸš€ å‚»ç“œå¼æ•™ä½ å¦‚ä½•éƒ¨ç½²

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

**éœ€è¦è´­ä¹°çš„ç¡¬ä»¶:**
- STM32F407ZGT6å¼€å‘æ¿
- HC-SR04
- ESP8266
- OV7670(æ— FIFO)
- MAX98357
- ST7789(SPI)
- XL6009 DC-DCå¯è°ƒå‡å‹æ¨¡å—
- TP4056å……ç”µæ¨¡å—
- 103450é”‚ç”µæ± 
- ST-LINK V2
- æœ‰æºèœ‚é¸£å™¨
- æŒ¯åŠ¨é©¬è¾¾
- SDå¡
- æŒ‰é’®
- é¢åŒ…æ¿

**è½¯ä»¶ç¯å¢ƒ:**
- STM32CubeMX (æœ€æ–°ç‰ˆæœ¬)
- Keil MDK-ARM V5.32+
- HALåº“æ”¯æŒ

### âš¡ ç¼–è¯‘éƒ¨ç½²

1. **ä¸‹è½½é¡¹ç›®**

2. **STM32CubeMXé…ç½®**
   - æ­¤æ­¥éª¤å¯ä»¥çœç•¥
   - å¦‚éœ€è¦é…ç½®STM32CubeMXï¼Œå¯ç›´æ¥æ‰“å¼€STM32F407-Accessibility-Assistance-System.iocè¿›è¡Œé…ç½®

3. **éœ€è¦ä¿®æ”¹çš„åœ°æ–¹**

**æ‰“å¼€mqtt.hæ–‡ä»¶å¹¶å®šä½åˆ°ä»¥ä¸‹ä½ç½®ä¿®æ”¹MQTTæœåŠ¡å™¨é…ç½®ä¿¡æ¯** (ESP8266ä¸MQTTæœåŠ¡å™¨è¿›è¡Œè¿æ¥é€šä¿¡)

```c
#define MQTT_BROKER ""    // è¯·åœ¨å¼•å·ä¹‹é—´è¾“å…¥MQTTæœåŠ¡å™¨åœ°å€
#define MQTT_PORT 1883    // æ ‡å‡†MQTTç«¯å£ï¼Œè‹¥éœ€è¦ä½¿ç”¨SSLåŠ å¯†è¿æ¥åˆ™ä¿®æ”¹ä¸º8883
#define MQTT_CLIENT_ID "" // è¯·åœ¨å¼•å·ä¹‹é—´è¾“å…¥å®¢æˆ·ç«¯ID
#define MQTT_USERNAME ""  // è¯·åœ¨å¼•å·ä¹‹é—´è¾“å…¥ç”¨æˆ·åï¼Œå¯ä»¥ä¸å¡«
#define MQTT_PASSWORD ""  // è¯·åœ¨å¼•å·ä¹‹é—´è¾“å…¥å¯†ç ï¼Œå¯ä»¥ä¸å¡«
```

**æ‰“å¼€esp8266.hæ–‡ä»¶å¹¶å®šä½åˆ°ä»¥ä¸‹ä½ç½®ä¿®æ”¹WiFiè¿æ¥é…ç½®** (ESP8266è¿æ¥åˆ°ä½ çš„WIFI)

```c
#define WIFI_SSID ""     // è¯·åœ¨å¼•å·ä¹‹é—´è¾“å…¥WiFiåç§°
#define WIFI_PASSWORD "" // è¯·åœ¨å¼•å·ä¹‹é—´è¾“å…¥WiFiå¯†ç 
```

**æ‰“å¼€STM32F407-Accessibility-Assistance-System.pyæ–‡ä»¶å¹¶å®šä½åˆ°ä»¥ä¸‹ä½ç½®ä¿®æ”¹APIå¯†é’¥é…ç½®** (ç”¨äºç™¾åº¦AIå›¾ç‰‡è¯†åˆ«)

```python
self.api_key = tk.StringVar(value="")     # è¯·åœ¨å¼•å·ä¹‹é—´è¾“å…¥ç™¾åº¦AIæä¾›çš„api_key
self.secret_key = tk.StringVar(value="")  # è¯·åœ¨å¼•å·ä¹‹é—´è¾“å…¥ç™¾åº¦AIæä¾›çš„secret_key
self.mqtt_broker = tk.StringVar(value="") # è¯·åœ¨å¼•å·ä¹‹é—´è¾“å…¥MQTTæœåŠ¡å™¨åœ°å€
```

4. **ç¼–è¯‘çƒ§å½•**
   - ä½¿ç”¨Keil MDKæ‰“å¼€é¡¹ç›®æˆ–è€…ç›´æ¥æ‰“å¼€STM32F407-Accessibility-Assistance-System.uvprojx
   - è¿æ¥ST-Linkè°ƒè¯•å™¨
   - æŒ‰F7ç¼–è¯‘
   - æŒ‰F8ä¸‹è½½åˆ°STM32æ¿

---

## âš™ï¸ ç¡¬ä»¶è¿æ¥

### ESP8266 WiFiæ¨¡å—
| ESP8266å¼•è„š | STM32å¼•è„š | åŠŸèƒ½æè¿° |
|------------|-----------|----------|
| TX | PA10 | ä¸²å£é€šä¿¡(ESPâ†’STM32) |
| RX | PA9 | ä¸²å£é€šä¿¡(STM32â†’ESP) |
| GND | GND | å…±åœ° |
| 3V | 3.3V | ç”µæºä¾›ç”µ |
| EN | 3.3V | ä½¿èƒ½ä¿¡å· |
| RST | PC14 | å¤ä½æ§åˆ¶ |

### ST7789 TFTæ˜¾ç¤ºå±
| ST7789å¼•è„š | STM32å¼•è„š | åŠŸèƒ½æè¿° |
|-----------|-----------|----------|
| SCL | PF0 | SPIæ—¶é’Ÿä¿¡å· |
| SDA | PF1 | SPIæ•°æ®ä¿¡å· |
| DC | PF3 | æ•°æ®/å‘½ä»¤æ§åˆ¶ |
| RES | PF2 | å¤ä½æ§åˆ¶ |
| BLK | PF5 | èƒŒå…‰æ§åˆ¶ |
| CS | PF4 | SPIç‰‡é€‰ä¿¡å· |

### HC-SR04 è¶…å£°æ³¢ä¼ æ„Ÿå™¨
| ä¼ æ„Ÿå™¨ | TRIGå¼•è„š | ECHOå¼•è„š | åŠŸèƒ½ |
|--------|----------|----------|------|
| HC-SR04 #1 | PD13 | PD12 | å‰æ–¹éšœç¢ç‰©æ£€æµ‹ |
| HC-SR04 #2 | PD11 | PD10 | ä¾§é¢éšœç¢ç‰©æ£€æµ‹ |

### OV7670 æ‘„åƒå¤´æ¨¡å—
| OV7670å¼•è„š | STM32å¼•è„š | åŠŸèƒ½æè¿° |
|-----------|-----------|----------|
| SCL | PF7 | I2Cæ—¶é’Ÿçº¿(SCCB) |
| SDA | PF6 | I2Cæ•°æ®çº¿(SCCB) |
| VS | PB7 | å‚ç›´åŒæ­¥ä¿¡å· |
| HS | PA4 | æ°´å¹³åŒæ­¥ä¿¡å· |
| PCLK | PA6 | åƒç´ æ—¶é’Ÿ |
| MCLK | PA8 | ä¸»æ—¶é’Ÿè¾“å…¥ |
| RST | PG8 | å¤ä½æ§åˆ¶ |
| PWDN | PG6 | ç”µæºç®¡ç† |
| D0-D7 | PC6,PC7,PE0,PE1,PE4,PB6,PE5,PE6 | 8ä½æ•°æ®æ€»çº¿ |

### MAX98357A éŸ³é¢‘æ”¾å¤§å™¨
| MAX98357Aå¼•è„š | STM32å¼•è„š | åŠŸèƒ½æè¿° |
|--------------|-----------|----------|
| BCLK | PB3 | I2Sä½æ—¶é’Ÿ |
| LRC | PA15 | I2Så·¦å³å£°é“æ—¶é’Ÿ |
| DIN | PB5 | I2Sæ•°æ®è¾“å…¥ |

### åé¦ˆç»„ä»¶
| ç»„ä»¶ | STM32å¼•è„š | åŠŸèƒ½æè¿° |
|------|-----------|----------|
| æŒ¯åŠ¨é©¬è¾¾ #1 | PD1 | ä¸»è¦è§¦è§‰åé¦ˆ |
| æŒ¯åŠ¨é©¬è¾¾ #2 | PD0 | è¾…åŠ©è§¦è§‰åé¦ˆ |
| èœ‚é¸£å™¨ | PD2 | å£°éŸ³è­¦æŠ¥ |

---

## ğŸ› ï¸ ç³»ç»Ÿå·¥ä½œæµç¨‹

```mermaid
graph TD
    A[ç³»ç»Ÿå¯åŠ¨] --> B[ç¡¬ä»¶åˆå§‹åŒ–]
    B --> C[WiFiè¿æ¥]
    C --> D[è¿›å…¥ç›‘æ§æ¨¡å¼]
    
    D --> E[HC-SR04æ£€æµ‹]
    E --> F{æ£€æµ‹åˆ°éšœç¢ç‰©?}
    F -->|æ˜¯| G[è·ç¦»åˆ¤æ–­]
    F -->|å¦| E
    
    G --> H{è·ç¦»ç­‰çº§}
    H -->|è¿‘è·ç¦»<20cm| I[é«˜é¢‘è­¦æŠ¥+å¼ºæŒ¯åŠ¨]
    H -->|ä¸­è·ç¦»20-50cm| J[è¿ç»­è­¦æŠ¥+æ™®é€šæŒ¯åŠ¨]
    H -->|è¿œè·ç¦»50-100cm| K[é—´æ–­æé†’+è½»å¾®æŒ¯åŠ¨]
    
    D --> L[ç”¨æˆ·æŒ‰é”®è§¦å‘]
    L --> M[OV7670æ‹ç…§]
    M --> N[å›¾åƒä¸Šä¼ è‡³äº‘ç«¯]
    N --> O[ç™¾åº¦AIè¯†åˆ«]
    O --> P[TTSè¯­éŸ³åˆæˆ]
    P --> Q[éŸ³é¢‘ä¸‹è½½æ’­æ”¾]
    
    I --> E
    J --> E
    K --> E
    Q --> D
```
---

## ğŸ›£ï¸ å¼€å‘è·¯çº¿

### âœ… å·²å®ŒæˆåŠŸèƒ½
- [x] STM32ç¡¬ä»¶é©±åŠ¨å¼€å‘
- [x] HC-SR04éšœç¢ç‰©æ£€æµ‹
- [x] OV7670æ‘„åƒå¤´æ‹ç…§åŠŸèƒ½
- [x] ESP8266WiFiè¿æ¥
- [x] MQTTåè®®æ•°æ®ä¼ è¾“
- [x] ç™¾åº¦AIå›¾åƒè¯†åˆ«APIå¯¹æ¥
- [x] TTSè¯­éŸ³åˆæˆç³»ç»Ÿ
- [x] SDå¡æ–‡ä»¶ç®¡ç†ç³»ç»Ÿä»¥åŠå›¾åƒä¿å­˜
- [x] ç”¨æˆ·äº¤äº’ç•Œé¢

### âŒ æœªè§£å†³çš„é—®é¢˜
- [ ] MAX98357æœªå®ç°
- [ ] èœ‚é¸£å™¨ä¼šé•¿é¸£
- [ ] HC-SR04æ£€æµ‹ä¼šé˜»å¡

### ğŸ”„ æœªæ¥æƒ³æ³•ä½†ä¹Ÿè®¸ä¸ä¼šå†ç»§ç»­å¼€å‘äº†
- [ ] GPSå®šä½å¯¼èˆªåŠŸèƒ½
- [ ] è¯­éŸ³æ§åˆ¶ç³»ç»Ÿ
- [ ] æ‰‹æœºAPPè¿œç¨‹ç›‘æ§
- [ ] éŸ³é¢‘æ¨¡å—æ’­æŠ¥è¯­è¨€

### âš ï¸ ç›®å‰å­˜åœ¨çš„é—®é¢˜
1. **ç½‘ç»œä¾èµ–**: å›¾åƒè¯†åˆ«åŠŸèƒ½éœ€è¦ç¨³å®šWiFiè¿æ¥
2. **å…‰ç…§æ•æ„Ÿ**: OV7670åœ¨å¼±å…‰ç¯å¢ƒä¸‹æˆåƒè´¨é‡ä¸‹é™
3. **æœåŠ¡å™¨è´Ÿè½½**: å…¬å…±MQTTæœåŠ¡å™¨åœ¨é«˜å³°æœŸä¸ç¨³å®š

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæŠ€æœ¯æ”¯æŒï¼š

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- [STM32 HAL Library](https://github.com/STMicroelectronics/STM32CubeF4) - STM32å®˜æ–¹HALåº“
- [ESP8266 Arduino Core](https://github.com/esp8266/Arduino) - ESP8266å¼€å‘æ¡†æ¶
- [Eclipse Paho MQTT](https://www.eclipse.org/paho/) - MQTTé€šä¿¡åè®®
- [ç™¾åº¦AIå¼€æ”¾å¹³å°](https://ai.baidu.com/) - å›¾åƒè¯†åˆ«

---

<div align="center">

### ğŸŒŸ é¡¹ç›®æ„¿æ™¯

**è®©ç§‘æŠ€æˆä¸ºè¿æ¥ä¸åŒèƒ½åŠ›äººç¾¤çš„æ¡¥æ¢**

*"Technology should serve humanity, humanity includes everyone."*

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStaræ”¯æŒä¸€ä¸‹ï¼**

**ğŸ”— è®©æ›´å¤šäººäº†è§£æ— éšœç¢æŠ€æœ¯çš„é‡è¦æ€§**

[![Star History Chart](https://api.star-history.com/svg?repos=ZUlxian/STM32F407-Accessibility-System&type=Date)](https://star-history.com/#ZUlxian/STM32F407-Accessibility-System&Date)

---

**ğŸ“§ ä½œè€…**: [ZU_xian]

</div>
